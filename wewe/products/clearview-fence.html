<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clearview Fencing - City Hardware</title>
    <link rel="stylesheet" href="../css/style.css"> 
</head>
<body>

    <header>
        <nav class="navbar">
            <a href="../index.html" class="logo">City Hardware</a>
            <ul class="nav-links">
                <li><a href="../index.html">Home</a></li>
                <li><a href="../index.html#products">Products</a></li>
                <li><a href="../index.html#about">About Us</a></li>
                <li><a href="../index.html#contact">Contact</a></li>
            </ul>
        </nav>
    </header>

    <main class="product-detail-page">
        <h1>Clearview Fencing</h1>
        <div class="product-container">
            <div class="slider-container">
                <div class="slider-images">
                    <img src="../images/clearview-fence-detail.jpg" class="slider-image active" data-caption="Detailed view of a Clearview Fence">
                    <img src="../images/clearview-fence-anti-climb.jpg" class="slider-image" data-caption="Anti-Climb Mesh for Enhanced Security">
                    <img src="../images/clearview-fence-installation.jpg" class="slider-image" data-caption="Professional Installation Example">
                    <!-- Add more images here -->
                </div>
                <div class="slider-controls">
                    <button class="slider-control-btn prev-btn">&lt;</button>
                    <button class="slider-control-btn next-btn">&gt;</button>
                </div>
                <div class="slider-caption">
                    Detailed view of a Clearview Fence
                </div>
            </div>
            <div class="product-info">
                <h3>High-Security Perimeter Fencing</h3>
                <p>Our Clearview fences offer the perfect balance of visibility and security, making them ideal for residential estates, commercial properties, and high-security areas.</p>

                <!-- Product 1 -->
                <div class="product-variant">
                    <h4>1. Clearview Anti-Climb Fence</h4>
                    <ul>
                        <li><strong>Mesh Size:</strong> 13mm x 75mm</li>
                        <li><strong>Panel Size:</strong> 2.4m (H) x 3.0m (W)</li>
                        <li><strong>Wire Diameter:</strong> 4mm</li>
                        <li><strong>Post:</strong> 80mm x 2.0mm x 3000mm</li> <!-- Note: This is the 4th li -->
                    </ul>
                    <p class="price">Galvanized: <strong data-price-type="galvanized">Ksh. 19,000</strong> per panel</p>
                    <p class="price">Colour Coated: <strong data-price-type="colour-coated">Ksh. 27,500</strong> per panel</p>
                    <button class="btn add-to-cart">Add to Cart</button>
                </div>
                
                <!-- Product 2 -->
                <div class="product-variant">
                    <h4>2. Clearview Standard Fence</h4>
                    <ul>
                        <li><strong>Mesh Size:</strong> 30mm x 75mm</li> <!-- Note: This is the 1st li -->
                        <li><strong>Panel Size:</strong> 1.8m (H) x 3.0m (W)</li> <!-- Note: This is the 2nd li -->
                    </ul>
                    <p class="price">Galvanized: <strong data-price-type="galvanized">Ksh. 15,000</strong> per panel</p>
                    <p class="price">Colour Coated: <strong data-price-type="colour-coated">Ksh. 23,000</strong> per panel</p>
                    <button class="btn add-to-cart">Add to Cart</button>
                </div>

            </div>
        </div>
    </main>

    <!-- Floating Cart Button -->
    <div id="floatingCartButton">
        View Quote Request (<span id="cartCount">0</span>)
    </div>
    <!-- Cart Modal -->
    <div id="cartModal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h2>Your Quote Request</h2>
            <div id="cartItems">
                <p>No items in your quote request yet.</p>
            </div>
            <button id="requestQuoteWhatsapp" class="btn">Request Quote via WhatsApp</button>
            <a href="../cart.html" class="btn" style="margin-left: 10px; background-color: #007bff;">View Full Quote Page</a>
            <button id="clearCart" class="btn">Clear Cart</button>
        </div>
    </div>
    
    <footer>
        <p>Contact Us: (123) 456-7890 | email@yourhardware.com</p>
        <p>Â© 2023 City Hardware. All Rights Reserved.</p>
    </footer>

    <script>
        // Import the common cart functionality
        // The addToCart function is defined in cart.js
        // The product object construction remains here as it's specific to this page's structure
        // The renderCart, saveCart, updateCartCount, and modal/floating button listeners are in cart.js
        
        // Ensure addToCart is available globally from cart.js
        // If cart.js is loaded after this script, you might need to defer this or use DOMContentLoaded
        // For simplicity, assuming cart.js is loaded before this script executes fully.
        
        // Event listener for "Add to Cart" buttons
        document.querySelectorAll('.add-to-cart').forEach(button => {
            button.addEventListener('click', () => {
                const productVariantDiv = button.closest('.product-variant');
                const productName = productVariantDiv.querySelector('h4').textContent.trim();
                
                const product = {
                    name: productName,
                    specs: []
                };
                
                // Extract specs from <ul>
                const specListItems = productVariantDiv.querySelectorAll('ul li');
                specListItems.forEach(li => {
                    const strongTag = li.querySelector('strong');
                    if (strongTag) {
                        const key = strongTag.textContent.replace(':', '').trim();
                        const value = li.textContent.replace(strongTag.textContent, '').trim();
                        product.specs.push(`${key}: ${value}`);
                    } else {
                        product.specs.push(li.textContent.trim());
                    }
                });
                
                // Extract prices
                const galvanizedPriceElem = productVariantDiv.querySelector('[data-price-type="galvanized"]');
                if (galvanizedPriceElem) {
                    product.priceGalvanized = `Galvanized: ${galvanizedPriceElem.textContent.trim()} per panel`;
                }
                const colourCoatedPriceElem = productVariantDiv.querySelector('[data-price-type="colour-coated"]');
                if (colourCoatedPriceElem) {
                    product.priceColourCoated = `Colour Coated: ${colourCoatedPriceElem.textContent.trim()} per panel`;
                }
                if (typeof addToCart === 'function') { // Check if addToCart is loaded
                    addToCart(product);
                }
            });
        });

        // --- Image Slider Logic ---
        const sliderContainer = document.querySelector('.slider-container');
        const sliderImages = sliderContainer.querySelectorAll('.slider-image');
        const prevBtn = sliderContainer.querySelector('.prev-btn');
        const nextBtn = sliderContainer.querySelector('.next-btn');
        const sliderCaption = sliderContainer.querySelector('.slider-caption');
        let currentImageIndex = 0;

        function showImage(index) {
            // Hide all images and remove active class
            sliderImages.forEach(img => {
                img.classList.remove('active');
            });

            // Show the current image and add active class
            sliderImages[index].classList.add('active');
            sliderCaption.textContent = sliderImages[index].dataset.caption;
        }

        function nextImage() {
            currentImageIndex = (currentImageIndex + 1) % sliderImages.length;
            showImage(currentImageIndex);
        }

        function prevImage() {
            currentImageIndex = (currentImageIndex - 1 + sliderImages.length) % sliderImages.length;
            showImage(currentImageIndex);
        }

        prevBtn.addEventListener('click', prevImage);
        nextBtn.addEventListener('click', nextImage);

        showImage(currentImageIndex); // Show the first image on load
    </script>
    <script src="../js/cart.js"></script>

</body>
</html>